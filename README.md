# akka-http-svc.g8

Template for akka-http REST microservice.

## Usage

Expand the template directly with `sbt` (version 0.13.13 or higher) or with [giter8](http://www.foundweekends.org/giter8/); you will be promped for several parameters (defaults in parentheses).
Here's an example:

```bash
$ sbt new polymorphic/akka-http-svc.g8
[info] Loading global plugins from /Users/dam/.sbt/0.13/plugins
[info] Set current project to tmp (in build file:/private/tmp/)
[info] Resolving com.github.scopt#scopt_2.10;3.5.0 ...
[info] downloading https://repo1.maven.org/maven2/org/scala-sbt/sbt-giter8-resolver/sbt-giter8-resolver_2.10/0.1.0/sbt-giter8-resolver_2.10-0.1.0.jar ...
[info] 		   [SUCCESSFUL ] org.scala-sbt.sbt-giter8-resolver#sbt-giter8-resolver_2.10;0.1.0!sbt-giter8-resolver_2.10.jar (109ms)

[...snip...]

Say something about this template. 

name [My Something Project]: 
organization [com.microworkflow]: 
sbtversion [0.13.13]: 
scalaversion [2.12.1]: 
akkaVersion [2.4.16]: 
akkaHttpVersion [10.0.3]: 
akkaHttpCirceVersion [1.12.0]: 
circeVersion [0.7.0]: 

Template applied in ./my-something-project
```

## Routes

The generated skeleton service implements several routes by composing 2 service slices:

* `/` (GET request): responds with `here` (as in "I'm here!"); implemented in `UtilityServiceSlice`
* `/info` (GET request); responds with a JSON object generated by [sbt-buildinfo](https://github.com/sbt/sbt-buildinfo); implemented in `UtilityServiceSlice`
* `/ping` (GET request): responds with "pong"; implemented in `HealthServiceSlice`

## Running the service

The service project uses the [sbt-revolver](https://github.com/spray/sbt-revolver) sbt plugin so you could start/stop the service from sbt in a forked JVM:

```bash
$ sbt
[info] Loading global plugins from /Users/dam/.sbt/0.13/plugins
[info] Loading project definition from /private/tmp/my-something-project/project
[info] Updating {file:/private/tmp/my-something-project/project/}my-something-project-build...
[info] Resolving org.fusesource.jansi#jansi;1.4 ...
[info] Done updating.
[info] Set current project to My Something Project (in build file:/private/tmp/my-something-project/)
> re-start
[info] Updating {file:/private/tmp/my-something-project/}main...
[info] Resolving jline#jline;2.14.1 ...
[info] Done updating.
[info] Compiling 7 Scala sources to /private/tmp/my-something-project/target/scala-2.12/classes...
[info] Application main not yet started
[info] Starting application main in the background ...
main Starting com.microworkflow.SvcBoot.main()
[success] Total time: 5 s, completed Jan 29, 2017 12:18:05 PM
> re-status
[info] Application main is currently running
[success] Total time: 0 s, completed Jan 29, 2017 12:18:09 PM
> main 12:18:11.219 [INFO ] a.e.s.Slf4jLogger - Slf4jLogger started
main 12:18:11.226 [DEBUG] a.e.EventStream - logger log1-Slf4jLogger started
main 12:18:11.229 [DEBUG] a.e.EventStream - Default Loggers started
main 12:18:11.326 [DEBUG] c.t.s.a.AkkaSSLConfig - Initializing AkkaSSLConfig extension...
main 12:18:11.327 [DEBUG] c.t.s.a.AkkaSSLConfig - buildHostnameVerifier: created hostname verifier: com.typesafe.sslconfig.ssl.DefaultHostnameVerifier@7c83a95a
main 12:18:16.782 [DEBUG] a.i.TcpListener - Successfully bound to /0:0:0:0:0:0:0:0:8080
re-stop
[info] Stopping application main (by killing the forked JVM) ...
main ... finished with exit code 143
[success] Total time: 0 s, completed Jan 29, 2017 12:18:19 PM
```